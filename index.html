<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>KHALID DAILY JOURNAL</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&display=swap" rel="stylesheet">
<style>
  :root{
    --cyan:#00ffff;--pink:#ff3366;
    --glow-cyan:0 0 50px rgba(0,255,255,0.9);--glow-pink:0 0 50px rgba(255,51,102,0.9);
    --dark:#0a0f23;--darker:#0d1428;
  }
  *{margin:0;padding:0;box-sizing:border-box;}
  html,body{height:100%;overflow-x:hidden;}
  body{
    font-family:'Orbitron',sans-serif;background:#000;color:#fff;
    min-height:100vh;display:flex;justify-content:center;padding:15px 10px;
    background: radial-gradient(circle at 20% 80%, #1a0033 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, #001133 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, #000033 0%, #000 100%);
  }
  .nebula{position:fixed;inset:0;opacity:0.6;z-index:-3;animation:nebulaPulse 20s infinite alternate;}
  @keyframes nebulaPulse{0%{transform:scale(1);opacity:0.5}100%{transform:scale(1.1);opacity:0.7}}
  .stars{position:fixed;inset:0;z-index:-2;}
  .star{position:absolute;background:#fff;border-radius:50%;box-shadow:0 0 10px #fff;animation:twinkle 3s infinite alternate;}
  @keyframes twinkle{0%{opacity:0.3;transform:scale(0.8)}100%{opacity:1;transform:scale(1.2)}}

  .container{
    width:100%;max-width:1100px;background:rgba(10,15,35,0.95);border-radius:32px;
    border:3px solid var(--cyan);box-shadow:0 0 100px rgba(0,255,255,0.6), inset 0 0 40px rgba(0,255,255,0.1);
    transition:all .7s;overflow:hidden;display:flex;flex-direction:column;min-height:90vh;
  }
  .container.short{border-color:var(--pink);box-shadow:0 0 100px rgba(255,51,102,0.7), inset 0 0 40px rgba(255,51,102,0.1);}
  header{background:var(--cyan);padding:18px 20px;text-align:center;transition:background .7s;}
  .container.short header{background:var(--pink);}
  #title{font-size:2.4rem;font-weight:900;color:#000;letter-spacing:5px;text-shadow:0 0 20px #fff;}
  .quote{margin:10px auto 0;width:80%;background:rgba(0,0,0,0.6);padding:9px 20px;border-radius:30px;font-size:0.9rem;font-weight:800;letter-spacing:3px;}

  .direction{display:flex;justify-content:center;gap:30px;margin:24px 0 20px;}
  .dir-btn{padding:16px 58px;border-radius:50px;font-size:1.4rem;font-weight:900;cursor:pointer;transition:all .5s;box-shadow:var(--glow-cyan);}
  .buy{background:var(--cyan);color:#000;}
  .sell{background:#330011;color:var(--pink);border:3px solid var(--pink);}
  .sell.active{background:var(--pink);color:#fff;box-shadow:var(--glow-pink);}

  .main-content{flex:1;overflow-y:auto;padding:0 20px 20px;}
  .main-grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:20px;margin-top:10px;}
  @media (max-width:1024px){.main-grid{grid-template-columns:1fr 1fr;}}
  @media (max-width:768px){.main-grid{grid-template-columns:1fr;}}

  .card{background:rgba(15,25,60,0.95);border-radius:24px;padding:22px;border:2px solid var(--cyan);box-shadow:var(--glow-cyan);transition:all .5s;}
  .container.short .card{border-color:var(--pink);box-shadow:var(--glow-pink);}
  .card h3{text-align:center;font-size:1.25rem;margin-bottom:16px;color:var(--cyan);text-shadow:0 0 15px;letter-spacing:1px;}
  .container.short .card h3{color:var(--pink);}

  .form-group{position:relative;margin:14px 0;}
  input{
    width:100%;padding:14px 16px;background:var(--darker);border:2px solid #333;
    border-radius:16px;color:#fff;font-size:0.95rem;transition:all .4s;
  }
  input:focus{border-color:var(--cyan);box-shadow:var(--glow-cyan);outline:none;}
  .container.short input:focus{border-color:var(--pink);box-shadow:var(--glow-pink);}

  label{
    position:absolute;top:50%;left:16px;transform:translateY(-50%);
    color:#888;font-size:0.9rem;pointer-events:none;transition:all .4s;
    background:transparent;padding:0 4px;
  }
  input:focus + label,
  input:not(:placeholder-shown) + label{
    top:-10px;left:12px;font-size:0.7rem;background:rgba(10,15,35,0.9);
    padding:0 8px;color:var(--cyan);font-weight:900;
  }
  .container.short input:focus + label,
  .container.short input:not(:placeholder-shown) + label{color:var(--pink);}

  .check-item{display:flex;align-items:center;justify-content:space-between;padding:11px 0;font-size:0.95rem;font-weight:700;border-bottom:1px solid rgba(255,255,255,0.1);}
  .check-item input[type=checkbox]{width:32px;height:32px;accent-color:var(--cyan);filter:drop-shadow(0 0 12px var(--cyan));}
  .container.short .check-item input[type=checkbox]{accent-color:var(--pink);filter:drop-shadow(0 0 12px var(--pink));}
  .check-item .weight{font-size:0.72rem;color:#0f0;opacity:0.8;}

  .submit-wrapper{text-align:center;padding:20px 0;background:rgba(0,0,0,0.3);position:sticky;bottom:0;}
  .submit{padding:18px 100px;background:var(--cyan);color:#000;border:none;border-radius:50px;font-size:1.6rem;font-weight:900;cursor:pointer;box-shadow:var(--glow-cyan);transition:all .5s;}
  .submit.short{background:var(--pink);box-shadow:var(--glow-pink);}

  .confluence-score{margin-top:12px;font-size:1.3rem;font-weight:900;color:#0f0;text-shadow:0 0 10px #0f0;}
  .container.short .confluence-score{color:#f06;text-shadow:0 0 10px #f06;}
  .tier{color:#aaa;font-size:0.85rem;margin-top:4px;}
  .no-go{color:#f66;}.entry-ok{color:#ff0;}.strong{color:#0f0;}.s-tier{color:var(--cyan);text-shadow:0 0 15px var(--cyan);}
  .container.short .s-tier{color:var(--pink);}
</style>
</head>
<body>
<div class="nebula"></div>
<div class="stars" id="stars"></div>

<div class="container" id="container">
  <header>
    <h1 id="title">KHALID DAILY JOURNAL</h1>
    <div class="quote" id="long-quote">CUT THE NOISE · EXECUTE · STACK GENERATIONAL WEALTH</div>
    <div class="quote" id="short-quote" style="display:none">THEY DOUBTED ME · NOW THEY WATCH IN SILENCE</div>
  </header>

  <form id="tradeForm">
    <div class="direction">
      <div class="dir-btn buy active" onclick="setDir('BUY',this)">LONG</div>
      <div class="dir-btn sell" onclick="setDir('SELL',this)">SHORT</div>
    </div>

    <div class="main-content">
      <div class="main-grid">
        <div class="card">
          <h3>TRADE DETAILS</h3>
          <div class="form-group"><input type="number" name="ticket" required placeholder=" "><label>Ticket</label></div>
          <div class="form-group"><input type="text" list="symbols" name="symbol" required placeholder=" "><label>Symbol</label></div>
          <div class="form-group"><input type="text" name="order" value="BUY" readonly><label>Order</label></div>
          <div class="form-group"><input type="number" step="0.01" name="lot" required placeholder=" "><label>Lot Size</label></div>
          <div class="form-group"><input type="number" step="0.00001" name="openprice" required placeholder=" "><label>Open Price</label></div>
        </div>
        <div class="card">
          <h3>RISK & EXIT</h3>
          <div class="form-group"><input type="number" step="0.00001" name="sl" required placeholder=" "><label>Stop Loss</label></div>
          <div class="form-group"><input type="number" step="0.00001" name="tp" required placeholder=" "><label>Take Profit</label></div>
          <div class="form-group"><input type="number" step="0.00001" name="close" placeholder=" "><label>Close Price</label></div>
          <div class="form-group"><input type="datetime-local" name="opentime" required><label>Open Time</label></div>
        </div>
        <div class="card" id="confluence-card">
          <h3 id="conf-title">LONG CONFLUENCE</h3>
          <div id="boostlist"></div>
          <div class="confluence-score" id="score">Confluence: 0%</div>
          <div class="tier" id="tier">NO ENTRY</div>
        </div>
      </div>
    </div>

    <div class="submit-wrapper">
      <button type="submit" class="submit" id="submit-btn">POST</button>
    </div>
  </form>
</div>

<datalist id="symbols">
  <option value="EURUSD"><option value="GBPUSD"><option value="USDJPY"><option value="AUDUSD">
  <option value="USDCAD"><option value="USDCHF"><option value="NZDUSD"><option value="EURGBP">
  <option value="EURJPY"><option value="GBPJPY"><option value="AUDJPY"><option value="EURCHF">
  <option value="EURCAD"><option value="EURAUD"><option value="EURNZD"><option value="GBPCHF">
  <option value="GBPCAD"><option value="GBPAUD"><option value="GBPNZD"><option value="CADJPY">
  <option value="CHFJPY"><option value="AUDCAD"><option value="AUDCHF"><option value="AUDNZD">
  <option value="NZDCAD"><option value="NZDCHF"><option value="NZDJPY"><option value="CADCHF">
  <option value="USDMXN"><option value="USDTRY"><option value="USDZAR"><option value="USDSGD">
  <option value="USDCNH"><option value="USDHKD"><option value="USDNOK"><option value="USDSEK">
  <option value="EURTRY"><option value="EURPLN"><option value="EURSEK"><option value="EURNOK">
  <option value="EURCZK"><option value="EURHUF"><option value="EURDKK"><option value="EURZAR">
  <option value="EURMXN"><option value="GBPMXN"><option value="GBPPLN"><option value="GBPZAR">
  <option value="TRYJPY"><option value="MXNJPY"><option value="ZARJPY"><option value="SGDJPY">
  <option value="NOKJPY"><option value="SEKJPY"><option value="DKKJPY"><option value="HUFJPY">
  <option value="XAUUSD"><option value="XAGUSD"><option value="US30"><option value="NAS100">
  <option value="SPX500"><option value="GER40"><option value="UK100"><option value="JPN225">
  <option value="AUS200"><option value="FRA40"><option value="HK50"><option value="CHN50">
  <option value="BTCUSD"><option value="ETHUSD"><option value="LTCUSD"><option value="BCHUSD">
  <option value="XRPUSD"><option value="ADAUSD"><option value="DOTUSD"><option value="SOLUSD">
</datalist>

<script>
// Stars
for(let i=0;i<120;i++){
  let s=document.createElement('div');s.className='star';
  s.style.width=s.style.height=(Math.random()*2+1)+'px';
  s.style.left=Math.random()*100+'%';s.style.top=Math.random()*100+'%';
  s.style.animationDelay=Math.random()*3+'s';
  document.getElementById('stars').appendChild(s);
}

const container = document.getElementById('container');
const submitBtn = document.getElementById('submit-btn');

const longConfluence = [
  {text:"HTF Bullish (D1 + H4)",weight:25},{text:"RSI < 40 (Oversold)",weight:25},{text:"Price ≥ Pivot OR touches S1",weight:15},
  {text:"Bullish Trendline Touch",weight:10},{text:"Volume Spike (Bullish)",weight:8},{text:"Fib 61.8% / 78.6% Bounce",weight:10},
  {text:"Breaker Block (Bullish)",weight:12},{text:"Bullish Candle Pattern",weight:8}
];
const shortConfluence = [
  {text:"HTF Bearish (D1 + H4)",weight:25},{text:"RSI > 60 (Overbought)",weight:25},{text:"Price ≤ Pivot OR touches R1",weight:15},
  {text:"Bearish Trendline Touch",weight:10},{text:"Volume Spike (Bearish)",weight:8},{text:"Fib 61.8% / 78.6% Rejection",weight:10},
  {text:"Breaker Block (Bearish)",weight:12},{text:"Bearish Candle Pattern",weight:8}
];

function renderConfluence(isShort){
  const data = isShort ? shortConfluence : longConfluence;
  document.getElementById('boostlist').innerHTML = '';
  data.forEach(item => {
    const div = document.createElement('div'); div.className = 'check-item';
    div.innerHTML = `<span>${item.text}</span><span class="weight">+${item.weight}%</span><input type="checkbox" class="boost" data-weight="${item.weight}">`;
    document.getElementById('boostlist').appendChild(div);
  });
  document.getElementById('conf-title').textContent = isShort ? "SHORT CONFLUENCE" : "LONG CONFLUENCE";
  document.querySelectorAll('.boost').forEach(b => b.onchange = updateConfluence);
  updateConfluence();
}
function updateConfluence(){
  let total = 0;
  document.querySelectorAll('.boost:checked').forEach(b => total += parseInt(b.dataset.weight));
  document.getElementById('score').textContent = `Confluence: ${total}%`;
  const tier = document.getElementById('tier');
  if(total < 65){tier.textContent='NO ENTRY';tier.className='tier no-go';}
  else if(total < 80){tier.textContent='ENTRY OK';tier.className='tier entry-ok';}
  else if(total < 95){tier.textContent='STRONG';tier.className='tier strong';}
  else{tier.textContent='S-TIER';tier.className='tier s-tier';}
}
function setDir(dir, el){
  document.querySelector('[name="order"]').value = dir;
  document.querySelectorAll('.dir-btn').forEach(b => b.classList.remove('active'));
  el.classList.add('active');
  const isShort = dir === 'SELL';
  container.classList.toggle('short', isShort);
  submitBtn.classList.toggle('short', isShort);
  document.getElementById('long-quote').style.display = isShort ? 'none' : 'block';
  document.getElementById('short-quote').style.display = isShort ? 'block' : 'none';
  renderConfluence(isShort);
}

// Form submit - 100% working on GitHub Pages
document.getElementById('tradeForm').onsubmit = function(e){
  e.preventDefault();
  submitBtn.textContent = 'SENDING...';
  submitBtn.disabled = true;
  fetch('https://script.google.com/macros/s/AKfycbyx0lL7L4oF8lD8vhXI93sXrbI3R3V4C8WUoAHye9P4gqJo2zTSbihyO-d1cIQLvOA-gg/exec', {
    method: 'POST',
    body: new FormData(this)
  })
  .then(() => {
    alert('TRADE LOGGED SUCCESSFULLY!');
    this.reset();
    document.querySelector('[name="opentime"]').value = new Date().toISOString().slice(0,16);
    document.querySelectorAll('.boost').forEach(c => c.checked = false);
    updateConfluence();
  })
  .catch(() => alert('Failed – check internet or Google Script URL'))
  .finally(() => {
    submitBtn.textContent = 'POST';
    submitBtn.disabled = false;
  });
};

// Init
document.addEventListener('DOMContentLoaded', () => {
  document.querySelector('[name="opentime"]').value = new Date().toISOString().slice(0,16);
  renderConfluence(false);
});
</script>
</body>
</html>
